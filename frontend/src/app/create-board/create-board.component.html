<!-- Note Editor -->
<div id="create-board-container">
  <div>
    <h1 id='title'></h1>
  </div>
  <div id='main-container'>

    <!-- Contorl Panel -->
    <div id='control-bar'>
      <!-- Note -->
      <div id="note-panel" class="panel">
        <div class="panel-head" (click)="panelActive('note')">
          <i class="fas fa-pencil-alt panel-icon"></i>
          <h3>Note</h3>
        </div>
        <div class="panel-collapse" [ngbCollapse]="noteCollapsed">
          <label><strong>Name of Note</strong></label>
          <br/>
          <input type="text" [(ngModel)]="note.name">
        </div>
      </div>

      <!-- Image -->
      <div id="image-panel" class="panel">
        <div class="panel-head" (click)="panelActive('image')">
          <i class="fas fa-image panel-icon"></i>
          <h3>Images</h3>
        </div>
        <div class="panel-collapse" [ngbCollapse]="imageCollapsed">
          <button class="btn yellow" id="upload-image" (click)="noteImageService.addNew()" (click)="switchService('image')">Add Image</button>
          <input id="file" type="file" accept=".jpg, .jpeg, .png" />
        </div>
      </div>

      <!-- Pin -->
      <div id="pin-panel" class="panel">
        <div class="panel-head" (click)="panelActive('pin')">
          <i class="fas fa-thumbtack panel-icon"></i>
          <h3>Pins</h3>
        </div>
        <div class="panel-collapse" [ngbCollapse] ="pinCollapsed" >
          <button class="btn yellow" id="add-pin" (click)="switchService('pin')">Add Pin</button>
          <app-text-editor [pin]="selectedPin"></app-text-editor>
        </div>
      </div>

      <!-- Publish -->
      <div id="publish-panel" class="panel">
        <div class="panel-head" (click)="panelActive('publish')">
          <i class="fab fa-leanpub panel-icon"></i>
          <h3>Publish</h3>
        </div>
        <div class="panel-collapse" [ngbCollapse]="publishCollapsed">
          <button class="btn green" id="save-draft" (click)="saveDraft()">Save as Draft</button>
          <button class="btn orange" id="publish" (click)="savePublish()">Publish</button>
        </div>
      </div>

    </div>

    <!-- Canvas -->
    <div id='canvas-container' (mouseup)="currentService.drop($event)" (mousemove)="currentService.move($event)">
      <div id='blackboard'>
        <div id="note-name">{{note.name}}</div>

        <!-- Image Template -->
        <div *ngIf="imageList" id="imageList" [ngStyle]="setImageLayer()">
          <div *ngFor='let image of imageList' id="imagers">
            <div class="image-frame resizable" [ngStyle]="image.style" (mousedown)="currentService.select(image,$event)">
              <img draggable="false" src={{image.url}}>
            </div>
          </div>
        </div>

        <!-- Pin Note Template -->
        <div *ngIf="pinList" id="pinList" [ngStyle]="setPinLayer()" (mousedown)="currentService.select($event)" (mousedown)="onSelect()">
          <div *ngFor='let pin of pinList' id="pins" [class.selected]="pin === selectedPin">
            <div class="pin-point" [ngStyle]="pin.style">
              <div class="pin-dot">
              </div>
              <div class="pin-textbox" [ngStyle]="pin.textboxUpright">
                <div class="text-container" [ngStyle]="pin.textboxPosition">
                  <p class="text-title">{{pin.title}}</p>
                  <p class="text-content">{{pin.content}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
